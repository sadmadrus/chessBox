# Игровые сессии

Под понятием "игровой сессии" (далее просто сессии или партии) - подразумевается уникальная запись в базе данных об игре между двумя пользователями.
Поскольку сессия должна однозначно идентифицировать шахматную партию, минимальный набор необходимых атрибутов должен быть следующим:

- **идентификатор** (целочисленное, уникальное в рамках таблицы поле, автоинкремент)
- **дата и время начала** (datetime) 
- **игрок белыми** - идентификатор игрока в БД, внешний ключ
- **игрок чёрными** - идентификатор игрока в БД, внешний ключ
- **описание партии** - место проведения, турнир (текстовое поле)
- **состояние партии**  - выбор из некоторых констант: "ничья", "выигрыш белых", "выигрыш черных", "идёт", "прервана"
- **нотация**  - запись последовательности ходов (текстовое поле)
- **позиция** - отображение доски (массив 8х8 с положением фигур в отдельных клетках)

### Дополнительно можно указывать 

- число "тихих ходов" - без взятий и перемещений пешек (для ничьей)
- число повторений позиции (для ничьей)
- очерёдность хода
- предложение ничьей от игрока
- просьбу об отмене хода
- статус онлайн/не в сети для соперников
- перевес по материалу

---


# Требования к API
 - ## создание игровой сессии (POST)
   - инициализация исходной позиции на доске
   - определение очерёдности хода 
   - создание записи в БД

    ### Входящие параметры:
    - время начала партии
    - идентификаторы игроков
    
    ### Возвращает:
    объект сессии
  ---
-  ## поиск игровой сессии (GET)
  
возвращает одну или несколько партий, совпадающих с параметрами запроса

### Входящие параметры (один или несколько):
1. Параметр поиска:
   - идентификатор партии
   - участник
   - дата начала (не позднее, не раньше, точное совпадение) 
   - статус партии 
   - место проведения
2. Ограничение на число результатов
    
### Возвращает:
Массив партий (или пустой)

---
-  ## Изменение игровой сессии (PUT)
Запись изменений после каждого хода или окончания партии

### Входящие параметры:
 - новое состояние нотации
 - новое состояние позиции
 - новое состояние очерёдности хода
 - число повторов позиции (0-3)
 - число ходов без взятий или движений пешек (0-50)
 - статус партии (если изменён)
    
### Возвращает:
Изменённый объект сессии 